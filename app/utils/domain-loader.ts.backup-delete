import financeData from '../data/finance-libraries.json';
import astronomyData from '../data/astronomy-libraries.json';
import machinelearningData from '../data/machinelearning-libraries.json';
import biochemistryData from '../data/biochemistry-libraries.json';
import { getSupportedDomains, getDomainDisplayName, getDomainDescription } from '../config/domains';

export type LibraryEntry = {
  rank: number;
  name: string;
  github_url: string;
  stars: number;
  hasContextFile?: boolean;
  contextFileName?: string;
};

export type DomainData = {
  libraries: LibraryEntry[];
  domain: string;
  description: string;
  keywords: string[];
};

// Map of domain IDs to their data
const domainDataMap: Record<string, DomainData> = {
  'finance': financeData as DomainData,
  'astronomy': astronomyData as DomainData,
  'machinelearning': machinelearningData as DomainData,
  'biochemistry': biochemistryData as DomainData,
};

// Individual loader functions for backward compatibility
export function loadfinanceData(): DomainData { return financeData as DomainData; }
export function loadastronomyData(): DomainData { return astronomyData as DomainData; }
export function loadmachinelearningData(): DomainData { return machinelearningData as DomainData; }
export function loadbiochemistryData(): DomainData { return biochemistryData as DomainData; }

export function getDomainData(domain: string): DomainData {
  const domainData = domainDataMap[domain];
  if (!domainData) {
    throw new Error(`Unknown domain: ${domain}`);
  }
  return domainData;
}

export function getAllDomains(): Array<{id: string, name: string, description: string, icon: string}> {
  const supportedDomains = getSupportedDomains();
  return supportedDomains.map(domain => ({
    id: domain,
    name: getDomainDisplayName(domain),
    description: getDomainDescription(domain),
    icon: ""
  }));
}

// Function to check if a domain exists
export function domainExists(domain: string): boolean {
  return domain in domainDataMap;
}

// Function to get all available domain IDs
export function getAvailableDomainIds(): string[] {
  return Object.keys(domainDataMap);
}
